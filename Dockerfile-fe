
FROM node:14-alpine3.10

RUN apk add --no-cache git
# RUN git config --global url."https://github.com/".insteadOf git@github.com:
# RUN git config --global url."https://".insteadOf git+ssh://git@github.com/

WORKDIR /opt/liwords-ui/

ENV PATH /opt/liwords-ui/node_modules/.bin:$PATH

COPY ./liwords-ui/package.json ./liwords-ui/package-lock.json ./
RUN mkdir -p wolges-wasm-pkg && echo '{}' > wolges-wasm-pkg/package.json

RUN ["npm", "ci"]

EXPOSE 3000

CMD ["npm", "start"]